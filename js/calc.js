function calculate(itemPassed) {
  var counterM = 0,
    counter = 0,
    max = 0;
  timeArr = [];
  zeros = 0;

  if (itemPassed) {
    if (Array.isArray(itemPassed.mancha[0])) {
      itemPassed.mancha.forEach((ele) => {
        console.log(ele);
        ele.forEach((ele) => {
          if (ele === 0) {
            zeros += 1;
          }
          counterM += ele;
          counter += 1;
          if (ele >= max) {
            max = ele;
          }
        });
      });
    } else {
      itemPassed.mancha.forEach((ele, ind) => {
        if (ele === 0) {
          zeros += 1;
        }
        counterM += parseInt(ele);
        counter += 1;
        if (ele >= max) {
          max = ele;
        }
      });
    }
  } else {
    console.log(itemPassed);
  }

  let info = {
    total: counterM,
    avg: (counterM / counter).toFixed(2),
    top: max,
    perc: 100 - 100 * (zeros / counter).toFixed(2),
    all: counter,
  };

  return info;
}

function dayofWeek(date) {
  let dateSplitter = date.split(".");

  let dayTarget = dateSplitter[0];
  let monthTarget = dateSplitter[1];

  //hardcode for 2019
  var d = new Date(2019, monthTarget, dayTarget);
  var n = d.getDay();
  const weekDays = ["Ned", "Pon", "Uto", "Sri", "Cet", "Pet", "Sub"];

  return weekDays[n];
}

function getMakeChart(item) {
  // array of tot mancha, time pairs
  console.log(item);
  var times = [],
    mTot = [],
    reducer,
    x;

  item.mancha.forEach((ele, ind) => {
    reducer = (acc, cur) => acc + cur;
    x = ele.reduce(reducer);
    mTot.push(x);
  });

  item.time.forEach((ele) => {
    times.push(parseFloat(`${ele[0]}.${ele[1]}`));
  });

  document.querySelector(".containerCart").style.display = "block";
  document.getElementById("myChart").style.display = "block";

  let myChart = document.getElementById("myChart").getContext("2d");

  var infoChart = new Chart(myChart, {
    type: "line",
    data: {
      labels: times,
      datasets: [
        {
          label: "Mancha by hour",

          data: mTot,
          backgroundColor: "black",
          borderWidth: 2,
          borderColor: "#007aa5",
        },
      ],
    },
    options: {
      legend: {
        display: false,
      },
      scales: {
        xAxes: [
          {
            gridLines: {
              display: false,
            },
            ticks: {
              fontColor: "#687d8b", // this here
            },
          },
        ],
        yAxes: [
          {
            ticks: {
              beginAtZero: true,
              fontColor: "#21abcd",
            },
          },
        ],
      },
    },
  });
}

// variable to  check witch page is it
// since calc will not be loaded in third page
const secondPage = 2;
